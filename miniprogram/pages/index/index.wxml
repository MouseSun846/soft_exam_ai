<!--index.wxml-->

<!-- é¡µé¢å¤´ -->
<view class="page-header">
  <text class="page-header-title">é¦–é¡µ</text>
</view>
<view class="page-header-placeholder"></view>

<view class="container">
  <!-- æ¬¢è¿åŒºåŸŸ -->
  <view class="welcome-section">
    <view class="welcome-card">
      <text class="welcome-title">æ¬¢è¿ä½¿ç”¨çŸ¥å¿†å°åŠ©æ‰‹</text>
      <text class="welcome-subtitle">æ™ºèƒ½å­¦ä¹ ï¼Œé«˜æ•ˆå¤‡è€ƒ</text>
    </view>
  </view>

  <!-- å¿«é€ŸåŠŸèƒ½å…¥å£ -->
  <view class="quick-actions-section">
    <view class="section-title">
      <text class="title-text">å¿«é€Ÿå¼€å§‹</text>
      <text class="title-desc">é€‰æ‹©å­¦ä¹ æ–¹å¼</text>
    </view>
    
    <view class="action-grid">
      <view class="action-item" bindtap="navigateToKnowledgeBase">
        <view class="action-icon knowledge">ğŸ“š</view>
        <text class="action-label">çŸ¥è¯†åº“</text>
        <text class="action-desc">ç®¡ç†å­¦ä¹ èµ„æ–™</text>
      </view>
      
      <view class="action-item" bindtap="navigateToSmartReview">
        <view class="action-icon review">ğŸ§ </view>
        <text class="action-label">æ™ºèƒ½å¤ä¹ </text>
        <text class="action-desc">AIç”Ÿæˆè¦ç‚¹</text>
      </view>
      
      <view class="action-item" bindtap="navigateToExam">
        <view class="action-icon exam">ğŸ“</view>
        <text class="action-label">æ¨¡æ‹Ÿæµ‹è¯•</text>
        <text class="action-desc">æ£€éªŒå­¦ä¹ æˆæœ</text>
      </view>
      
      <view class="action-item" bindtap="navigateToExamResult">
        <view class="action-icon result">ğŸ“Š</view>
        <text class="action-label">æµ‹è¯•ç»“æœ</text>
        <text class="action-desc">æŸ¥çœ‹åˆ†ææŠ¥å‘Š</text>
      </view>
    </view>
  </view>

  <!-- ä»Šæ—¥ä»»åŠ¡ -->
  <view class="tasks-section">
    <view class="section-title">
      <text class="title-text">ä»Šæ—¥ä»»åŠ¡</text>
      <text class="title-desc">{{completedTasksCount}}/{{todayTasks.length}} å·²å®Œæˆ</text>
    </view>
    
    <view class="tasks-list">
      <block wx:for="{{todayTasks}}" wx:key="id">
        <view class="task-item {{item.completed ? 'completed' : ''}}">
          <view class="task-checkbox" bindtap="completeTask" data-id="{{item.id}}">
            <text class="checkbox-icon">{{item.completed ? 'âœ“' : ''}}</text>
          </view>
          <view class="task-content">
            <view class="task-info">
              <text class="task-title">{{item.title}}</text>
              <text class="task-desc">{{item.description}}</text>
            </view>
            <view class="task-meta">
              <view class="task-priority {{item.priority}}">
                {{item.priority === 'high' ? 'é«˜' : item.priority === 'medium' ? 'ä¸­' : 'ä½'}}ä¼˜å…ˆçº§
              </view>
              <text class="task-time">é¢„è®¡{{item.estimatedTime}}åˆ†é’Ÿ</text>
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>

  <!-- æœ€è¿‘å­¦ä¹ æ´»åŠ¨ -->
  <view class="activities-section">
    <view class="section-title">
      <text class="title-text">æœ€è¿‘å­¦ä¹ </text>
      <text class="title-desc">å­¦ä¹ è®°å½•</text>
    </view>
    
    <view class="activities-list">
      <block wx:for="{{recentActivities}}" wx:key="id">
        <view class="activity-item" bindtap="viewActivityDetail" data-id="{{item.id}}">
          <text class="activity-icon">{{item.icon}}</text>
          <view class="activity-content">
            <text class="activity-title">{{item.title}}</text>
            <text class="activity-desc">{{item.description}}</text>
            <text class="activity-time">{{formatActivityTime(item.timestamp)}}</text>
          </view>
        </view>
      </block>
    </view>
  </view>

  <!-- åˆ·æ–°æŒ‰é’® -->
  <view class="refresh-section">
    <button class="refresh-btn" bindtap="refreshData" disabled="{{loading}}">
      <text class="btn-text">{{loading ? 'åˆ·æ–°ä¸­...' : 'åˆ·æ–°æ•°æ®'}}</text>
    </button>
  </view>
</view>

<!-- åº•éƒ¨æ‚¬æµ®èœå• -->
<bottom-tabbar current-tab="{{0}}"></bottom-tabbar>