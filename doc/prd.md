# “AI软考管家”微信小程序 功能需求文档 (PRD)

## 1. 产品概述

### 1.1. 产品名称
AI软考管家

### 1.2. 产品形态
微信小程序

### 1.3. 产品目标
为“软考”（计算机技术与软件专业技术资格（水平）考试）考生提供一个智能化的复习工具。

### 1.4. 核心价值
允许用户上传个性化的复习资料，构建私人知识库。基于此知识库，利用 AI 大模型实现智能复习要点总结、模拟试题（问答、填空）生成，并通过测试结果追踪用户的知识掌握情况，从而提高复习效率。

## 2. 目标用户
所有准备参加“软考”的考生，包括但不限于：
* 在校学生
* 希望通过考证提升职场竞争力的 IT 从业者
* 需要系统性复习知识的备考人员

---

## 3. 前端功能需求文档 (小程序端)

本文档描述用户在小程序界面上能看到和操作的功能。

### 模块一：用户中心
* **1.1. 用户授权与登录**
    * 【功能描述】首次访问小程序时，系统应引导用户进行微信授权登录，以创建和识别用户身份。
    * 【验收标准】
        * 用户可点击“微信登录”按钮，拉起微信授权。
        * 授权成功后，系统自动为用户创建账户并进入小程序主页。
        * 已登录用户再次打开小程序时，应保持登录状态，无需重复授权。
* **1.2. 个人中心页**
    * 【功能描述】提供一个页面展示用户基本信息和功能入口。
    * 【验收标准】
        * 应显示用户的微信头像和昵称。
        * 应提供清晰的功能入口，至少包括：“我的知识库”、“我的测试记录”、“设置”。

### 模块二：知识库管理
* **2.1. 文档上传入口**
    * 【功能描述】用户需要一个清晰的入口来上传本地复习资料。
    * 【验收标准】
        * 在首页或“我的知识库”页面，应有一个醒目的“上传文档”或“+”按钮。
* **2.2. 文件选择与上传**
    * 【功能描述】用户可从微信聊天记录或手机本地选择支持的文档格式进行上传。
    * 【验收标准】
        * 系统应支持用户选择并上传 .txt, .doc, .docx, .md, .pdf 格式的文件。
        * 上传过程中，界面应实时显示上传进度（如：进度条或百分比）。
        * 上传完成后，系统应给出明确的成功提示（如：Toast 提示“上传成功，后台解析中”）。
        * 若上传失败（如：格式不支持、文件过大、网络问题），应给出清晰的失败原因提示。
* **2.3. 知识库列表**
    * 【功能描述】用户需要一个列表来管理所有已上传的文档。
    * 【验收标准】
        * 列表应展示所有用户上传过的文档。
        * 每项应包含：文件名、文件类型图标、上传时间。
        * 每项应展示该文档的“处理状态”，状态包括：
            * `解析中`：表示后端正在处理该文档。
            * `已就绪`：表示文档已解析完毕，可用于 AI 功能。
            * `解析失败`：表示后端处理该文档时出错。
* **2.4. 文档管理**
    * 【功能描述】用户可以删除不再需要的文档。
    * 【验收标准】
        * 用户可通过左滑或长按等手势，对列表中的任一文档执行“删除”操作。
        * 点击“删除”时，系统应弹出二次确认框（如：“确认删除该文档吗？删除后将无法恢复”）。
        * 用户确认后，该文档应从列表中移除。

### 模块三：智能复习
* **3.1. 复习要点生成**
    * 【功能描述】用户输入想复习的主题，AI 基于其个人知识库生成复习要点。
    * 【验收标准】
        * 界面应提供一个清晰的文本输入框，引导用户输入“复习主题”或“知识点”（例如：“请输入您想复习的知识点，如 TCP/IP”）。
        * 用户输入内容后，可点击“生成要点”按钮。
        * 点击后，按钮应变为不可点击状态，并显示加载提示（如：“AI 正在思考中...”）。
* **3.2. 复习要点展示**
    * 【功能描述】系统以结构化的形式展示 AI 生成的复习要点。
    * 【验收标准】
        * 生成的内容应展示在输入框下方的专属区域。
        * 内容应保持良好的排版，支持标题、列表、粗体等基本格式。
        * 应提供“复制内容”按钮，方便用户将要点导出到其他地方。

### 模块四：模拟测试
* **4.1. 测试生成**
    * 【功能描述】用户可以基于特定主题或刚生成的复习要点，发起一次模拟测试。
    * 【验收标准】
        * 在“智能复习”模块生成的要点下方，应提供一个“开始模拟测试”的按钮。
        * 在专门的“模拟测试”功能区，也应允许用户输入主题来生成试卷。
        * 点击生成后，系统应显示“试卷生成中...”的加载状态。
* **4.2. 答题界面**
    * 【功能描述】为用户提供一个沉浸式的答题环境，支持问答题和填空题。
    * 【验收标准】
        * 界面应清晰展示题型（问答题/填空题）、题号（如：3/10）和题干。
        * **对于填空题**：题干中应使用“___”或“(1)”等方式标出填空位置，并在下方提供对应的输入框。
        * **对于问答题**：应提供一个多行文本输入框（textarea）供用户作答。
        * 用户可以“上一题”、“下一题”切换。
        * 所有题目回答完毕后，用户可点击“提交试卷”。

### 模块五：学习追踪与分析
* **5.1. 测试结果反馈**
    * 【功能描述】用户提交试卷后，系统立即展示批改结果和 AI 分析。
    * 【验收标准】
        * 提交后，系统应显示“AI 批改中...”的加载状态。
        * 结果页应展示本次测试的概要（如：填空题得分 8/10）。
        * **逐题反馈（填空题）**：应清晰标出用户答案的“正确”或“错误”，并展示“标准答案”。
        * **逐题反馈（问答题）**：应展示用户的答案、AI 提供的“参考答案”，以及 AI 对用户答案的“评估意见”（如：是否抓住了要点、有哪些遗漏）。
        * 结果页底部应提供 AI 综合评估，总结用户的知识薄弱点，并给出复习建议。
* **5.2. 测试历史**
    * 【功能描述】系统应保存用户所有的模拟测试记录，以便追踪复习进度。
    * 【验收标准】
        * 在“个人中心”或“我的测试记录”中，应提供一个测试历史列表。
        * 列表按时间倒序排列。
        * 每项应包含：测试主题、测试时间、测试得分（概要）。
        * 用户点击任一历史记录，应能跳转到该次测试的“5.1. 测试结果反馈”详情页。

---

## 4. 后端功能需求文档 (服务端)

本文档描述为支持前端功能，后台系统需要具备的数据处理、业务逻辑和 AI 能力。

### 模块一：用户账户系统
* **1.1. 用户管理**
    * 【功能描述】后端需要管理和维护小程序的用户信息。
    * 【验收标准】
        * 系统能根据前端传递的微信授权凭证，获取用户的唯一标识（OpenID）。
        * 系统能为新用户自动创建账户，并关联其 OpenID。
        * 系统应确保所有用户数据（如上传的文档、测试记录）都与其唯一账户严格绑定。

### 模块二：知识库服务
* **2.1. 文档接收与存储**
    * 【功能描述】后端必须能够接收前端上传的多种格式文件，并进行安全存储。
    * 【验收标准】
        * 系统应能接收并暂存 .txt, .doc, .docx, .md, .pdf 格式的文件。
        * 系统应能将原始文件持久化存储（如：对象存储）。
* **2.2. 文档异步解析**
    * 【功能描述】后端需要一个稳定机制，在后台自动解析上传的文档内容。
    * 【验收标准】
        * 文件上传成功后，应自动触发一个异步的解析任务，避免前端长时间等待。
        * 系统必须具备解析不同格式文件的能力，准确提取其中的全部文本内容。
        * 解析任务应能更新数据库中该文档的“处理状态”（解析中、已就绪、解析失败）。
* **2.3. 个性化知识库构建 (核心)**
    * 【功能描述】系统需将解析后的文本内容，构建成可供 AI 检索的、用户专属的知识库。
    * 【验收标准】
        * 系统应能将长文本进行合理分块（Chunking）。
        * 系统应能将文本块处理（如：向量化）后，存入专门的（向量）数据库。
        * **（数据隔离）**：必须确保在任何情况下，一个用户的知识库内容（原始文件、解析文本、向量）都不能被其他用户访问或检索到。

### 模块三：AI 智能服务
* **3.1. 复习要点生成 (RAG)**
    * 【功能描述】调用 AI 大模型，根据用户的提问和其私人知识库，生成复习要点。
    * 【验收标准】
        * 接收到用户的“复习主题”查询后，系统必须首先在**该用户的**知识库中检索最相关的内容片段作为“上下文”。
        * 系统应将“上下文”和用户的“提问”一同发送给 AI 大模型（LLM）。
        * 系统应指示 LLM 严格基于提供的“上下文”来总结复习要点。
        * 系统能将 LLM 返回的文本格式化后，返回给前端。
* **3.2. 模拟试卷生成**
    * 【功能描述】调用 AI 大模型，基于指定上下文（用户知识库内容）生成试卷。
    * 【验收标准】
        * 系统应能根据用户指定的“主题”或“复习要点”内容，从用户知识库中检索相关上下文。
        * 系统应指示 LLM 基于上下文生成指定类型的题目（问答题、填空题）。
        * 系统必须同时要求 LLM 生成每道题的“标准答案”。
        * 系统应能解析 LLM 返回的题目和答案，并将其结构化地存储在数据库中，以备后续批改使用。

### 模块四：测试与分析服务
* **4.1. 试卷自动批改**
    * 【功能描述】后端接收用户提交的答案，并进行自动批改。
    * 【验收标准】
        * **（填空题）**：系统能从数据库中调取标准答案，与用户的答案进行比对，自动判断对错并计分。
        * **（问答题）**：系统能将“标准答案”和“用户答案”一同发送给 LLM，并指示 LLM 对用户的答案进行评估、打分（或提供评估意见）。
* **4.2. 学习数据存储**
    * 【功能描述】后端需要持久化存储用户的每一次测试记录和批改结果。
    * 【验收标准】
        * 系统应保存每一份试卷的ID、题目、用户答案、标准答案、AI 评估意见等。
        * 系统应支持前端按用户 ID 查询其所有的测试历史列表及详情。